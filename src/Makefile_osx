CFLAGS=-I../include -I/usr/include 
CXXFLAGS=-std=c++11 -Wall -I../include -I/usr/local/include -I/usr/local/Cellar/eigen/3.2.8/include/eigen3 -I/usr/local/Cellar/gcc49/4.9.3/lib/gcc/4.9/gcc/x86_64-apple-darwin15.2.0/4.9.3/include
LIB=-L/usr/local/lib 
CC=gcc
CPP=g++

#LIB += -L/usr/local/opt/sqlite/lib
#CXXFLAGS += -I/usr/local/opt/sqlite/include

.PHONY: interp

all: mosaic lasmerge lasgrid las2csrs lasclip rastfit interp proj_ellips findmin srtm_lakes #lasstats

debug: CXXFLAGS += -DDEBUG -g
debug: CFLAGS += -DDEBUG -g
debug: all

release: CXXFLAGS += -O3
release: CFLAGS += -O3
release: all

mosaic:
	$(CPP) $(CXXFLAGS) -fopenmp mosaic.cpp $(LIB) -lgdal -o ../bin/mosaic

lasstats:
	$(CPP) $(CXXFLAGS) lasstats.cpp $(LIB) -llas -lgdal -lproj -lgeos -o ../bin/lasstats

lasmerge:
	$(CPP) $(CXXFLAGS) lasmerge.cpp $(LIB) -lboost_system -llas -o ../bin/lasmerge

lasgrid:
	$(CPP) $(CXXFLAGS) lasgrid.cpp $(LIB) -llas -lgdal -lboost_system -o ../bin/lasgrid

las2csrs:
	$(CPP) $(CXXFLAGS) las2csrs.cpp $(LIB) -llas -lgdal -lboost_system -lboost_filesystem -lproj -o ../bin/las2csrs

lasclip:
	$(CPP) $(CXXFLAGS) lasclip.cpp $(LIB) -llas -lgeos -lgdal -lboost_system -o ../bin/lasclip

rastfit:
	$(CPP) $(CXXFLAGS) -DWITH_CGAL interp/Interpolators.cpp rastfit.cpp $(LIB) -lgdal -lmpfr -lgmp -lCGAL -lCGAL_Core -lboost_thread-mt -o ../bin/rastfit

interp:
	$(CPP) $(CXXFLAGS) interp/Interpolators.cpp interp.cpp $(LIB) -lgomp -lgdal -lmpfr -lgmp -lCGAL -lCGAL_Core -lboost_thread-mt -o ../bin/interp

proj_ellips:
	$(CC) $(CFLAGS) proj_ellips.c $(LIB) -o ../bin/proj_ellips

findmin:
	$(CPP) $(CXXFLAGS) utils/findmin.cpp $(LIB) -lgdal -o ../bin/findmin

srtm_lakes:
	$(CPP) $(CXXFLAGS) utils/srtm_lakes.cpp $(LIB) -lgdal -o ../bin/srtm_lakes

clean:
	rm ../bin/*
